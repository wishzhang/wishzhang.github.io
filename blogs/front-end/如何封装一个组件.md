---
title: 如何封装一个组件
date: 2022-08-24
tags: 
- 前端工作手册

categories:

- 软件工程
---

react、vue、angular是前端三大主流框架，一个应用划分为模块，然后模块由组件组合而成。同样的一个产品由各项业务组成，每项业务又由每个步骤组成。封装组件的目的是为了复用，但同时又要适当地解耦。



首先是识别组件，一个页面是一个组件，页面内的某部分是组件，组件内还有基础组件，总的来说一个页面是一棵组件树。这棵组件树主要是面对三种现实模型来封装的：公共视觉交互模型、公共业务模型、一般业务模型。公共视觉交互模型比公共业务模型要更普适，因为是和领域知识没什么关系的不去涉及业务逻辑、是横向的。而公共业务模型是需要具体到业务数据、上下文，是纵向的，业务的稳定性、多样性影响着公共业务组件。有多处的视觉交互或业务是相似的并且具有一定的稳定性和发展性的，那么就可以考虑将其抽取封装成公共组件了。



公共视觉交互模型和公共业务模型的区别是，公共视觉交互模型不会去涉及到具体的业务逻辑，面向的是视觉交互场景。模型输入的数据结构、命名也不会有具体业务意义。公共视觉交互模型封装成公共基础组件，公共业务模型封装成公共业务组件。



公共基础组件的核心是在公共视觉的基础上需要有非常灵活的功能性和可扩展性，以横向方式去提供给业务模型使用。另外还需要针对可靠性、易用性、一致性、美观性等目标去完善。



公共业务组件在实践中是比较容易给软件带来复杂度和混乱的。我想原因是因为几个业务之间有公共部分但有少量差异，随着业务发展，出现了更多依赖这个公共业务组件的业务，但同时差异更多且逐渐变大。这时，如果把差异部分也纳入这个公共组件，那么组件就会逐渐失控了。解决办法是：维持最小和最稳定的功能、接口集合。将实现差异部分分离出去，由提供接口给相似的这些业务组件去实现（例如组合方式），最后还可以提供统一的外观接口来调用这些业务组件。这部分还是需要去深入了解一下变化是什么，可以借鉴一下各种设计模式针对的变化又是什么。



最后，前端页面中还有大量的一般业务组件，通常出现复杂度高的原因是：控制流、数据流复杂和严重违背高内聚低耦合（内聚：一个模块里的所有元素应该做好一件事并且这件事有足够应对变化的能力。耦合：如果需要存在直接耦合，就尽量使用数据耦合，少用控制耦合，限制公共耦合的范围，尽量避免使用内容耦合）。这种情况总的来说得让模块、组件之间保持简单的关系和合适的组件粒度，同时要考虑软件目标。



END.